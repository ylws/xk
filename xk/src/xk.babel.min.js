"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),CFCMXK=function(){function e(t){_classCallCheck(this,e),this.initVal(t)}return _createClass(e,[{key:"initVal",value:function(e){this.cfg={};var t={id:"playerArea",fullscreen:!1,Fscreenid:"V_fullScreen",keycodeevent:!0,channel:[],channelB:[],channelS:[],flashplayer:[],channelflag:!0,openchannelvoice:!1,livecenter:!1,controlhei:40,voicechannelnum:0,model:[{type:"normal",name:"标清"},{type:"high",name:"高清"},{type:"super",name:"超高清"}]};_extends(this.cfg,t,e),this.initcommonVal()}},{key:"initcommonVal",value:function(){var e=this.cfg;e.WH=this.idstyle(e.widhei?e.widhei.wid:window.innerWidth,e.widhei?e.widhei.hei:window.innerHeight),document.oncontextmenu=function(){return!1},this.domDeal(),this.setckplayer(),this.countcreatevideo(e.channelnum),this.keycode(),this.videoopt(),this.resize()}},{key:"setStyle",value:function(e,t,n){e.style[t]=n}},{key:"setAttr",value:function(e,t,n){e.setAttribute(t,n)}},{key:"platformcheck",value:function(){var e=!!document.createElement("video").canPlayType,t=navigator.userAgent,n=t.match(/(iPhone|Android|iPad|Mobile|uc)/i),i=null!=t.match(/.(clr)*[rv:]([11.]+)/),l=null!=t.match(/.(msie)/gi),s=null!=t.match(/.(chrome)/gi),c=null!=t.match(/.(firefox)/gi),o=void 0;return n?o="mobile":e&&!n&&(o="pch5"),{ie11:i,ie:l,checkres:o,h5video:e,mobile:n,firefox:c,chrome:s}}},{key:"keycode",value:function(){var e=this,t=this.cfg;t.keycodeevent&&(document.onkeydown=function(n){var i=n||window.event;if("122"==i.keyCode){if(t.lock)return t.f11count||(t.f11count=setTimeout(function(){delete t.f11secondtime,delete t.f11time,delete t.lock,clearTimeout(t.f11count),delete t.f11count},1e3)),i.preventDefault?(i.preventDefault(),i.stopPropagation()):(i.cancelBubble=!0,i.returnValue=!0),!1;t.f11time?(t.f11secondtime=(new Date).getTime(),t.f11secondtime-t.f11time<=1e3&&(console.log("您的操作太频繁，请稍后再试!"),t.lock=!0)):t.f11time=(new Date).getTime(),t.fullscreen?t.fullscreen=!1:t.fullscreen=!0,e.platformcheck().ie11||e.platformcheck().ie||(i.preventDefault?i.preventDefault():i.cancelBubble=!0,t.fullscreenObj.click())}})}},{key:"resize",value:function(){var e=this,t=this.cfg;window.addEventListener&&(window.onresize=function(){if(e.platformcheck().ie11||e.platformcheck().ie||t.fullscreen||!e.platformcheck().chrome){var n=null;n&&clearTimeout(n),n=setTimeout(function(){e.resizeplayer(e)},50)}})}},{key:"resizeplayer",value:function(e){var t=e.cfg;t.WH.wid!=screen.width&&t.WH.hei!=screen.height||(t.fullscreen=!1),t.fullscreen?t.WH=e.idstyle(screen.width,screen.height):(t.fullscreen=!1,t.WH=e.idstyle(t.widhei?t.widhei.wid:window.innerWidth,t.widhei?t.widhei.hei:window.innerHeight)),e.setAttr(e.getid(t.id),"style","width:"+t.WH.wid+"px;height:"+(t.WH.hei+t.controlhei)+"px"),e.countcreatevideo(t.channelnum)}},{key:"domDeal",value:function(){var e=this.cfg;e.showObj=this.getid(e.id),this.setAttr(e.showObj,"style","width:"+e.WH.wid+"px;height:"+(e.WH.hei+e.controlhei)+"px"),e.showObj.innerHTML=this.createvideo(e.channelnum),e.livecenter?this.slidedom():e.fullscreenObj=this.getid(e.Fscreenid)}},{key:"fullscreenevent",value:function(){var e=this,t=this.cfg;t.fullscreenObj.onclick=function(){if(e.platformcheck().ie11||e.platformcheck().ie)return!1;this.className.indexOf("icon-a")>=0?(t.fullscreen=!0,e.FullScreen(t.showObj),this.className=this.className.replace(/(icon-a)/gi,"icon-quanpingtuichu"),e.hidechannel(!0)):(t.fullscreen=!1,e.CancelFullScreen(),e.hidechannel(!1),this.className=this.className.replace(/(icon-quanpingtuichu)/gi,"icon-a"),e.resizeplayer(e))}}},{key:"hidechannel",value:function(e){var t=this.cfg.showObj.querySelectorAll(".channel");Array.prototype.slice.call(t).forEach(function(t,n){t.style.display=e?"none":"block"})}},{key:"videoopt",value:function(){var e=this;this.cfg;this.fullscreenevent(),document.addEventListener&&(document.addEventListener("webkitfullscreenchange",function(){e.escFullScreen()},!1)||document.addEventListener("mozfullscreenchange",function(){e.escFullScreen()},!1)||document.addEventListener("fullscreenchange",function(){e.escFullScreen()},!1)||document.addEventListener("webkitfullscreenchange",function(){e.escFullScreen()},!1)),document.attachEvent&&document.attachEvent("msfullscreenchange",function(){e.escFullScreen()})}},{key:"slidedom",value:function(){var e=this.cfg,t=document.createElement("div");this.setAttr(t,"class","control"),this.setAttr(t,"id","V_control"),this.setAttr(t,"style","height"+e.controlhei+"px;width:100%");var n='\n\t\t\t <div class=" iconfont icon-a" id="'+e.Fscreenid+'" title="F11进入ie全屏或退出全屏"></div>\n\t\t\t <div class="scroll" id="V_scroll" volumval="50">\n\t\t\t\t <div class="scrollson" id="V_scrollson" style="top: 60px;height:50px;"></div>\n\t\t\t\t <div class="scrollsonbg" id="V_scrollsonbg" ></div>\n\t\t\t </div>\n\t\t\t\n\t\t\t <div class="volum iconfont icon-yinliangkai" id="V_volum"></div>\n\t\t\t\n\t\t\t<div class="modelcontrol" id="V_modelcontrol">\n\t\t\t\t<div class="title">清晰度</div>\n\t\t\t\t<div class="modelcontrollist" id="V_modelcontrollist"></div>\n\t\t\t</div>\n\t\t';t.innerHTML=n,this.getid(e.id).appendChild(t),e.fullscreenObj=this.getid(e.Fscreenid),e.V_control=this.getid("V_control"),e.V_modelcontrol=this.getid("V_modelcontrol"),e.V_modelcontrollist=this.getid("V_modelcontrollist"),e.V_volum=this.getid("V_volum"),e.V_scroll=this.getid("V_scroll"),e.V_scrollson=this.getid("V_scrollson"),e.V_scrollsonbg=this.getid("V_scrollsonbg"),this.volumevent(),this.voiceRefrash(),this.channelchangeevent(),this.modeldom(),this.fullscreenevent()}},{key:"modeldom",value:function(){var e=this.cfg,t="";if(e.model.length>0)for(var n=0;n<e.model.length;n++)t+='<span class="modelspan" type='+e.model[n].type+">"+e.model[n].name+"</span>";e.V_modelcontrollist.innerHTML=t,this.setAttr(e.V_modelcontrollist,"style","top:-"+(20*e.model.length+12)+"px;"),this.channelmodelEvent(e.V_modelcontrollist)}},{key:"channelmodelEvent",value:function(e){var t=this,n=this.cfg,i=e.querySelectorAll(".modelspan");Array.prototype.slice.call(i).forEach(function(e,i){e.addEventListener("click",function(e){var i=e||window.event;i.preventDefault?(i.preventDefault(),i.stopPropagation()):(i.cancelBubble=!0,i.returnValue=!1);var l=this.getAttribute("type");"normal"==l?t.resetflashinfo(n.channelB,n.channeltitle,1,n.channelB.length,n.channelB):"super"==l?t.resetflashinfo(n.channelS,n.channeltitle,1,n.channelS.length,n.channelS):t.resetflashinfo(n.channel,n.channeltitle,1,n.channel.length,n.channel)},!1)})}},{key:"channelchangeevent",value:function(){var e=this.cfg,t=this;e.V_modelcontrol.onclick=function(n){var i=n||window.event;i.preventDefault?(i.preventDefault(),i.stopPropagation()):(i.cancelBubble=!0,i.returnValue=!1),"none"==t.getStyle(e.V_modelcontrollist,"display")?t.setStyle(e.V_modelcontrollist,"display","block"):t.setStyle(e.V_modelcontrollist,"display","none")}}},{key:"volumevent",value:function(){var e=this.cfg;e.V_volum.onmouseenter=function(){e.V_scroll.style.right="50px"},e.V_scroll.onmouseenter=function(){this.style.right="50px"},e.V_volum.onmouseleave=function(){e.V_scroll.style.right="-500000px"},e.V_scroll.onmouseleave=function(){this.style.right="-500000px"},e.V_volum.onclick=function(e){e||window.event;this.className.indexOf("icon-yinliangkai")>=0?this.className=this.className.replace(/(icon-yinliangkai)/gi,"icon-yinliangguan"):this.className=this.className.replace(/(icon-yinliangguan)/gi,"icon-yinliangkai")}}},{key:"voiceRefrash",value:function(){var e=this,t=this.cfg,n=!1,i=this.getoffset(t.V_scroll).top+10;t.V_scroll.onmousedown=function(l){var s=0,c=0;(n=!0)&&(document.onmousemove=function(n){var l=n||window.event,c=(s=l.pageY||l.clientY)-i>100?100:s-i;c=c<=0?0:c,e.setAttr(t.V_scrollson,"style","top:"+(c+10)+"px;height:"+(100-c)+"px;"),e.setAttr(t.V_scroll,"volumlen",100-c),CKobject.getObjectById("ckplayer_"+t.voicechannelnum).changeVolume(100-c),100-c==0?e.setAttr(t.V_volum,"class","volum iconfont icon-yinliangguan"):e.setAttr(t.V_volum,"class","volum iconfont icon-yinliangkai")},document.onmouseup=function(l){var s=l||window.event;if(n){document.onmousemove=null;var o=(c=s.pageY||s.clientY)-i>100?100:c-i;o=o<=0?0:o,e.setAttr(t.V_scrollson,"style","top:"+(o+10)+"px;height:"+(100-o)+"px;"),e.setAttr(t.V_scroll,"volumval",100-o),CKobject.getObjectById("ckplayer_"+t.voicechannelnum).changeVolume(100-o),100-o==0?e.setAttr(t.V_volum,"class","volum iconfont icon-yinliangguan"):e.setAttr(t.V_volum,"class","volum iconfont icon-yinliangkai")}n=!1})}}},{key:"getStyle",value:function(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}},{key:"getoffset",value:function(e,t){if(null==e)return t;t||((t={}).top=0,t.left=0);var n=this.getStyle(e,"position");if("absolute"==n||"relative"==n){if(e.getBoundingClientRect&&null!=navigator.userAgent.toLowerCase().match(/.(msie)/))return t.top+=e.getBoundingClientRect.top,t.left+=e.getBoundingClientRect.left,t;t.top+=e.offsetTop,t.left+=e.offsetLeft}else t.top+=0,t.left+=0;return this.getoffset(e.parentElement,t)}},{key:"getid",value:function(e){return document.getElementById(e)}},{key:"appendvideo",value:function(e,t){var n=this.cfg;n.flashinfo=[],n.livecenter&&(n.channelflag=!1);for(var i=0;i<t;i++)e+='<div class="list"  id=list_'+i+'  ><div class=" channel icon-yulan iconfont" id="channel_'+i+'" style="display:'+(n.channelflag?"block":"none")+'"></div><div class="mute icon-yinliangguan iconfont" id="mute_'+i+'"></div><div class="title" title="'+(n.channeltitle[i]?n.channeltitle[i]:"")+'"><span>'+(n.channeltitle[i]?n.channeltitle[i]:"")+'</span></div><div style="width:100%;height:100%"    id=video_'+i+" ></div></div>",n.flashinfo.push({num:i,id:"video_"+i,url:n.channelB[i]});return e}},{key:"resetflashinfo",value:function(e,t,n,i,l,s){var c=this.cfg;c.flashinfo=[];var o=[],a=[];c.channelnum=i;for(var r=0,h=0;h<i;h++)r++;if(r>=i){if(this.domDeal(),this.countcreatevideo(c.channelnum),e.length<=0){for(var u=(n-1)*i,d=u;d<n*i;d++)0,c.flashinfo[d-u]={num:d-u,id:"video_"+(d-u),url:e[d]},a[d-u]=l[d],o[d-u]=t[d],this.titleevent(d-u,o),this.channelevent(d-u,a,s);return!1}for(var f=0,g=(n-1)*i,m=g;m<n*i;m++)f++,c.flashinfo[m-g]={num:m-g,id:"video_"+(m-g),url:e[m]},a[m-g]=l[m],o[m-g]=t[m],this.titleevent(m-g,o),this.channelevent(m-g,a,s);f>=i&&this.setckplayer()}}},{key:"createvideo",value:function(e){var t="";switch(e){case 1:case 2:case 3:case 4:t=this.appendvideo(t,e);break;case 5:case 6:var n=document.createElement("div");this.setAttr(n,"class","videopartLostDom"),t=this.appendvideo(t,e),5==e&&(t+='<div class="nosingal"  id=list_5   >NOSINGAL</div>');break;case 7:case 8:case 9:t=this.appendvideo(t,e),7==e&&(t+='<div class="nosingal" id=list_7   >NOSINGAL</div>',t+='<div class="nosingal"  id=list_8  >NOSINGAL</div>'),8==e&&(t+='<div id=list_8 class="nosingal" >NOSINGAL</div>')}return t}},{key:"countcreatevideo",value:function(e){var t=this.cfg;switch(t.livecenter&&(t.WH.hei=t.WH.hei),e){case 1:this.setAttr(this.getid("list_0"),"style","width:"+(t.WH.wid-2)+"px;height:"+(t.WH.hei-2)+"px");break;case 2:for(var n,i=parseInt(t.WH.wid/2)-2,l=parseInt(t.WH.hei/2)-2,s=0;s<e;s++)0==s?(r="border-right:none;",n=i+1):(r="",n=i),this.setAttr(this.getid("list_"+s),"style",r+"width:"+n+"px;height:"+l+"px;top:"+(t.WH.hei-l)/2+"px");break;case 3:for(var i=parseInt(t.WH.wid/3),l=parseInt(t.WH.hei/2),c=(t.WH.hei-2*l)/2,s=0;s<e;s++)0==s?this.setAttr(this.getid("list_"+s),"style","border-right:none;width:"+(2*i-1)+"px;height:"+2*l+"px;top:"+c+"px"):1==s?this.setAttr(this.getid("list_"+s),"style","border-bottom:none;width:"+(i-2)+"px;height:"+l+"px;top:"+c+"px"):this.setAttr(this.getid("list_"+s),"style","width:"+(i-2)+"px;height:"+(l-1)+"px;top:"+c+"px");break;case 4:var i=parseInt(t.WH.wid/2)-2,l=parseInt(t.WH.hei/2)-2,o=i+1;for(s=0;s<e;s++){r="";0==s?(r="border-right:none;border-bottom:none;",this.setAttr(this.getid("list_"+s),"style",r+"width:"+o+"px;height:"+l+"px;")):1==s?(r="border-bottom:none;",this.setAttr(this.getid("list_"+s),"style",r+"width:"+i+"px;height:"+l+"px;")):2==s?(r="border-right:none;",this.setAttr(this.getid("list_"+s),"style",r+"width:"+o+"px;height:"+l+"px;")):this.setAttr(this.getid("list_"+s),"style",r+"width:"+i+"px;height:"+l+"px;")}break;case 5:case 6:var i=parseInt(t.WH.wid/3),l=parseInt(t.WH.hei/3),a=document.createElement("div");this.setAttr(a,"class","videopartLostDom");for(s=0;s<e;s++)0==s?this.setAttr(this.getid("list_"+s),"style","width:"+(2*i-1)+"px;height:"+(2*l-1)+"px;border-right:none;border-bottom:none;"):1==s?this.setAttr(this.getid("list_"+s),"style","width:"+(i-2)+"px;height:"+(l-1)+"px;border-bottom:none;"):2==s?this.setAttr(this.getid("list_"+s),"style","width:"+(i-2)+"px;height:"+(l-1)+"px;border-bottom:none;"):3==s?this.setAttr(this.getid("list_"+s),"style","width:"+(i-2)+"px;margin-right:"+(t.WH.wid-3*i)+"px;height:"+(l-1)+"px;float:right;border-left:none;"):4==s?this.setAttr(this.getid("list_"+s),"style","width:"+(i-2)+"px;height:"+(l-1)+"px;float:right;"):5==s&&this.setAttr(this.getid("list_"+s),"style","width:"+(i-1)+"px;height:"+(l-1)+"px;border-right:none;");5==e&&this.setAttr(this.getid("list_5"),"style","border-right:none;width:"+(i-1)+"px;height:"+(l-1)+"px;line-height:"+l+"px;text-align:center;color:#fff");break;case 7:case 8:case 9:for(var i=parseInt(t.WH.wid/3)-2,l=parseInt(t.WH.hei/3)-1,o=i+1,s=0;s<e;s++){var r;0==s||1==s||3==s||4==s||6==s||7==s?(r="border-right:none;",this.setAttr(this.getid("list_"+s),"style",r+"width:"+o+"px;height:"+l+"px;")):(r="",this.setAttr(this.getid("list_"+s),"style",r+"width:"+i+"px;height:"+l+"px;"))}7==e&&(this.setAttr(this.getid("list_7"),"style","border-right:none;width:"+o+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff"),this.setAttr(this.getid("list_8"),"style","width:"+i+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff")),8==e&&this.setAttr(this.getid("list_8"),"style","width:"+i+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff")}}},{key:"muteevent",value:function(e){var t=this.cfg,n=this,i=null,l=CKobject.getObjectById("ckplayer_"+e);t.openchannelvoice&&e==t.openchannelvoice[0]?this.getid("mute_"+e).className=this.getid("mute_"+e).className.replace(/(icon-yinliangguan)/gi,"icon-yinliangkai"):this.getid("mute_"+e).className=this.getid("mute_"+e).className.replace(/(icon-yinliangkai)/gi,"icon-yinliangguan"),l&&(this.getid("mute_"+e).onclick=function(){t.voicechannelnum=e,this.className.indexOf("icon-yinliangguan")>=0?(this.className=this.className.replace(/(icon-yinliangguan)/gi,"icon-yinliangkai"),t.livecenter?CKobject.getObjectById("ckplayer_"+e).changeVolume(parseInt(t.V_scroll.getAttribute("volumval"))):CKobject.getObjectById("ckplayer_"+e).changeVolume(100)):(this.className=this.className.replace(/(icon-yinliangkai)/gi,"icon-yinliangguan"),CKobject.getObjectById("ckplayer_"+e).changeVolume(0))},t.livecenter&&0==e&&(i=setInterval(function(){CKobject.getObjectById("ckplayer_"+e).changeVolume&&(clearInterval(i),n.getid("mute_"+e).className=n.getid("mute_"+e).className.replace(/(icon-yinliangguan)/gi,"icon-yinliangkai"),setTimeout(function(){CKobject.getObjectById("ckplayer_"+e).changeVolume(100)},500))},1e3)))}},{key:"titleevent",value:function(e,t){t?(this.getid("mute_"+e).parentNode.querySelector(".title").children[0].textContent=t[e],this.getid("mute_"+e).parentNode.querySelector(".title").setAttribute("title",t[e])):(this.getid("mute_"+e).parentNode.querySelector(".title").children[0].textContent="",this.getid("mute_"+e).parentNode.querySelector(".title").setAttribute("title",""))}},{key:"channelevent",value:function(e,t,n){this.getid("channel_"+e).onclick=t?function(){console.log("查看多分屏信息,跳转查看页面"),n.$router.push({name:"AJloopClasssee",params:{see:"see",item:t[e]}})}:null}},{key:"getStyle",value:function(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}},{key:"idstyle",value:function(e,t){var n={},i=t;return.5625*e>t?t/.5625<=e?(n.hei=t,n.wid=parseInt(t/.5625)):(i-=10,this.idstyle(e,i)):(n.hei=parseInt(.5625*e),n.wid=e),n}},{key:"FullScreen",value:function(e){if(e.requestFullScreen)e.requestFullScreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullScreen)e.webkitRequestFullScreen();else{if(!e.msRequestFullscreen)return!0;e.msRequestFullscreen()}}},{key:"CancelFullScreen",value:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else{if(!document.msExitFullscreen)return!0;document.msExitFullscreen()}}},{key:"escFullScreen",value:function(){var e=this.cfg;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(this.CancelFullScreen(),this.hidechannel(!1),e.fullscreenObj.className=e.fullscreenObj.className.replace(/(icon-quanpingtuichu)/gi,"icon-a"))}},{key:"setckplayer",value:function(){for(var e=this.cfg,t=this,n=0;n<e.channelnum;n++)!function(n){t.getid(e.flashinfo[n].id).innerHTML="",t.ckplayer(e.flashinfo[n])}(n)}},{key:"ckplayer",value:function(e){var t=this.cfg,n=0;t.openchannelvoice&&e.num==t.openchannelvoice[0]&&(n=t.openchannelvoice[1]);var i={f:e.url,a:"",s:"0",c:"0",x:"",i:"",d:"",u:"",l:"",r:"",t:"",y:"",z:"",e:"8",v:n,p:"1",h:"0",q:"",m:"",o:"",w:"",g:"",j:"",k:"",n:"",wh:"16:9",lv:"0",er:"加载失败",loaded:"",my_title:"",my_url:encodeURIComponent(window.location.href)},l={wmode:"transparent",allowFullScreen:!0,allowScriptAccess:"always"};this["ckPlay_"+e.num]=CKobject.embedSWF("/static/cklive/src/ckplayer/ckplayer.swf",e.id,"ckplayer_"+e.num,"100%","100%",i,l),this.muteevent(e.num)}}]),e}();
export function CFCMXK(param) {
	return new CFCMXK(param)
}