"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),CFCMXK=function(){function e(t){_classCallCheck(this,e),this.initVal(t)}return _createClass(e,[{key:"initVal",value:function(e){this.cfg={};var t={id:"playerArea",fullscreen:!1,Fscreenid:"V_fullScreen",flashplayer:[]};_extends(this.cfg,t,e),this.initcommonVal()}},{key:"initcommonVal",value:function(){var e=this.cfg;e.WH=this.idstyle(e.widhei?e.widhei.wid:window.innerWidth,e.widhei?e.widhei.hei:window.innerHeight),document.oncontextmenu=function(){return!1},this.domDeal(),this.setckplayer(),e.fullscreenObj=this.getid(e.Fscreenid),this.keycode(),this.videoopt(),this.resize()}},{key:"setStyle",value:function(e,t,i){e.style[t]=i}},{key:"setAttr",value:function(e,t,i){e.setAttribute(t,i)}},{key:"platformcheck",value:function(){var e=!!document.createElement("video").canPlayType,t=navigator.userAgent,i=t.match(/(iPhone|Android|iPad|Mobile|uc)/i),n=null!=t.match(/.(clr)*[rv:]([11.]+)/),l=null!=t.match(/.(msie)/gi),s=null!=t.match(/.(chrome)/gi),r=null!=t.match(/.(firefox)/gi),c=void 0;return i?c="mobile":e&&!i&&(c="pch5"),{ie11:n,ie:l,checkres:c,h5video:e,mobile:i,firefox:r,chrome:s}}},{key:"keycode",value:function(){var e=this,t=this.cfg;document.onkeydown=function(i){var n=i||window.event;if("122"==n.keyCode){if(t.lock)return t.f11count||(t.f11count=setTimeout(function(){delete t.f11secondtime,delete t.f11time,delete t.lock,clearTimeout(t.f11count),delete t.f11count},1e3)),n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!0),!1;t.f11time?(t.f11secondtime=(new Date).getTime(),console.log(t.f11secondtime-t.f11time),t.f11secondtime-t.f11time<=1e3&&(console.log("您的操作太频繁，请稍后再试!"),t.lock=!0)):t.f11time=(new Date).getTime(),t.fullscreen?t.fullscreen=!1:t.fullscreen=!0,e.platformcheck().ie11||e.platformcheck().ie||(n.preventDefault?n.preventDefault():n.cancelBubble=!0,t.fullscreenObj.click())}}}},{key:"resize",value:function(){var e=this,t=this.cfg;window.addEventListener&&(window.onresize=function(){if(e.platformcheck().ie11||e.platformcheck().ie||t.fullscreen||!e.platformcheck().chrome){var i=null;i&&clearTimeout(i),i=setTimeout(function(){e.resizeplayer(e)},50)}})}},{key:"resizeplayer",value:function(e){var t=e.cfg;t.WH.wid!=screen.width&&t.WH.hei!=screen.height||(t.fullscreen=!1),t.fullscreen?t.WH=e.idstyle(screen.width,screen.height):(t.fullscreen=!1,t.WH=e.idstyle(t.widhei?t.widhei.wid:window.innerWidth,t.widhei?t.widhei.hei:window.innerHeight)),e.setAttr(e.getid(t.id),"style","width:"+t.WH.wid+"px;height:"+t.WH.hei+"px"),e.countcreatevideo(t.channelnum)}},{key:"domDeal",value:function(){var e=this.cfg;e.showObj=this.getid(e.id),this.setAttr(e.showObj,"style","width:"+e.WH.wid+"px;height:"+e.WH.hei+"px"),e.showObj.innerHTML=this.createvideo(e.channelnum),this.countcreatevideo(e.channelnum)}},{key:"videoopt",value:function(){var e=this,t=this.cfg;t.fullscreenObj.onclick=function(){if(e.platformcheck().ie11||e.platformcheck().ie)return!1;"fullscreen"==this.getAttribute("class")?(t.fullscreen=!0,e.FullScreen(t.showObj),e.setAttr(this,"class","outfullscreen")):(t.fullscreen=!1,e.CancelFullScreen(),e.setAttr(this,"class","fullscreen"),e.resizeplayer(e))},document.addEventListener&&(document.addEventListener("webkitfullscreenchange",function(){e.escFullScreen()},!1)||document.addEventListener("mozfullscreenchange",function(){e.escFullScreen()},!1)||document.addEventListener("fullscreenchange",function(){e.escFullScreen()},!1)||document.addEventListener("webkitfullscreenchange",function(){e.escFullScreen()},!1)),document.attachEvent&&document.attachEvent("msfullscreenchange",function(){e.escFullScreen()})}},{key:"getid",value:function(e){return document.getElementById(e)}},{key:"appendvideo",value:function(e,t){var i=this.cfg;i.flashinfo=[];for(var n=0;n<t;n++)e+='<div class="list"  id=list_'+n+'  ><div class="title">'+i.channeltitle[n]+'</div><div style="width:100%;height:100%"    id=video_'+n+" ></div></div>",i.flashinfo.push({num:n,id:"video_"+n,url:i.channel[n]});return e}},{key:"resetflashinfo",value:function(e){for(var t=0;t<cfg.channelnum;t++)cfg.flashinfo[t].url=e[t];this.setckplayer()}},{key:"createvideo",value:function(e){var t="";switch(e){case 1:case 2:case 3:case 4:t=this.appendvideo(t,e);break;case 5:case 6:var i=document.createElement("div");this.setAttr(i,"class","videopartLostDom"),t=this.appendvideo(t,e),5==e&&(t+='<div class="nosingal"  id=list_5   >NOSINGAL</div>');break;case 7:case 8:case 9:t=this.appendvideo(t,e),7==e&&(t+='<div class="nosingal" id=list_7   >NOSINGAL</div>',t+='<div class="nosingal"  id=list_8  >NOSINGAL</div>'),8==e&&(t+='<div id=list_8 class="nosingal" >NOSINGAL</div>')}return t}},{key:"countcreatevideo",value:function(e){var t=this.cfg;switch(e){case 1:this.setAttr(this.getid("list_0"),"style","width:"+(t.WH.wid-2)+"px;height:"+(t.WH.hei-2)+"px");break;case 2:for(var i,n=parseInt(t.WH.wid/2)-2,l=parseInt(t.WH.hei/2)-2,s=0;s<e;s++)0==s?(h="border-right:none;",i=n+1):(h="",i=n),this.setAttr(this.getid("list_"+s),"style",h+"width:"+i+"px;height:"+l+"px;top:"+(t.WH.hei-l)/2+"px");break;case 3:for(var n=parseInt(t.WH.wid/3),l=parseInt(t.WH.hei/2),r=(t.WH.hei-2*l)/2,s=0;s<e;s++)0==s?this.setAttr(this.getid("list_"+s),"style","border-right:none;width:"+(2*n-1)+"px;height:"+2*l+"px;top:"+r+"px"):1==s?this.setAttr(this.getid("list_"+s),"style","border-bottom:none;width:"+(n-2)+"px;height:"+l+"px;top:"+r+"px"):this.setAttr(this.getid("list_"+s),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;top:"+r+"px");break;case 4:var n=parseInt(t.WH.wid/2)-2,l=parseInt(t.WH.hei/2)-2,c=n+1;for(s=0;s<e;s++){h="";0==s?(h="border-right:none;border-bottom:none;",this.setAttr(this.getid("list_"+s),"style",h+"width:"+c+"px;height:"+l+"px;")):1==s?(h="border-bottom:none;",this.setAttr(this.getid("list_"+s),"style",h+"width:"+n+"px;height:"+l+"px;")):2==s?(h="border-right:none;",this.setAttr(this.getid("list_"+s),"style",h+"width:"+c+"px;height:"+l+"px;")):this.setAttr(this.getid("list_"+s),"style",h+"width:"+n+"px;height:"+l+"px;")}break;case 5:case 6:var n=parseInt(t.WH.wid/3),l=parseInt(t.WH.hei/3),o=document.createElement("div");this.setAttr(o,"class","videopartLostDom");for(s=0;s<e;s++)0==s?this.setAttr(this.getid("list_"+s),"style","width:"+(2*n-1)+"px;height:"+(2*l-1)+"px;border-right:none;border-bottom:none;"):1==s?this.setAttr(this.getid("list_"+s),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;border-bottom:none;"):2==s?this.setAttr(this.getid("list_"+s),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;border-bottom:none;"):3==s?this.setAttr(this.getid("list_"+s),"style","width:"+(n-2)+"px;margin-right:"+(t.WH.wid-3*n)+"px;height:"+(l-1)+"px;float:right;border-left:none;"):4==s?this.setAttr(this.getid("list_"+s),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;float:right;"):5==s&&this.setAttr(this.getid("list_"+s),"style","width:"+(n-1)+"px;height:"+(l-1)+"px;border-right:none;");5==e&&this.setAttr(this.getid("list_5"),"style","border-right:none;width:"+(n-1)+"px;height:"+(l-1)+"px;line-height:"+l+"px;text-align:center;color:#fff");break;case 7:case 8:case 9:for(var n=parseInt(t.WH.wid/3)-2,l=parseInt(t.WH.hei/3)-1,c=n+1,s=0;s<e;s++){var h;0==s||1==s||3==s||4==s||6==s||7==s?(h="border-right:none;",this.setAttr(this.getid("list_"+s),"style",h+"width:"+c+"px;height:"+l+"px;")):(h="",this.setAttr(this.getid("list_"+s),"style",h+"width:"+n+"px;height:"+l+"px;"))}7==e&&(this.setAttr(this.getid("list_7"),"style","border-right:none;width:"+c+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff"),this.setAttr(this.getid("list_8"),"style","width:"+n+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff")),8==e&&this.setAttr(this.getid("list_8"),"style","width:"+n+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff")}}},{key:"getStyle",value:function(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}},{key:"idstyle",value:function(e,t){var i={},n=t;return.5625*e>t?t/.5625<=e?(i.hei=t,i.wid=parseInt(t/.5625)):(n-=10,this.idstyle(e,n)):(i.hei=parseInt(.5625*e),i.wid=e),i}},{key:"FullScreen",value:function(e){if(e.requestFullScreen)e.requestFullScreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullScreen)e.webkitRequestFullScreen();else{if(!e.msRequestFullscreen)return!0;e.msRequestFullscreen()}}},{key:"CancelFullScreen",value:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else{if(!document.msExitFullscreen)return!0;document.msExitFullscreen()}}},{key:"escFullScreen",value:function(){var e=this.cfg;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(this.CancelFullScreen(),this.setAttr(e.fullscreenObj,"class","fullscreen"))}},{key:"setckplayer",value:function(){for(var e=this.cfg,t=this,i=0;i<e.channelnum;i++)!function(i){t.getid(e.flashinfo[i].id).innerHTML="",t.ckplayer(e.flashinfo[i])}(i)}},{key:"ckplayer",value:function(e){var t="loadedHandler"+e.num,i={f:e.url,a:"",s:"0",c:"0",x:"",i:"",d:"",u:"",l:"",r:"",t:"",y:"",z:"",e:"8",v:"-1",p:"1",h:"0",q:"",m:"",o:"",w:"",g:"",j:"",k:"",n:"",wh:"16:9",lv:"1",er:"加载失败",loaded:t,my_title:"",my_url:encodeURIComponent(window.location.href)},n={bgcolor:"transparent",allowFullScreen:!0,allowScriptAccess:"always"};CKobject.embedSWF("ckplayer/ckplayer.swf",e.id,"ckplayer_"+e.id,"100%","100%",i,n)}}]),e}();
export function CFCMXK(param) {
	return new CFCMXK(param)
}